name: coffee-shop-analyzer

services:

  gateway:
    container_name: coffee-gateway
    build:
      context: .
      dockerfile: ./gateway/Dockerfile
    entrypoint: python main.py
    environment:
      - PYTHONUNBUFFERED=1
    networks:
      - coffee

  client:
    container_name: coffee-client
    build:
      context: .
      dockerfile: ./client/Dockerfile
    entrypoint: python main.py
    environment:
      - PYTHONUNBUFFERED=1
      - LOGGING_LEVEL=DEBUG
    volumes:
    - ./.data:/client/.data
    networks:
      - coffee
    depends_on:
      - gateway

networks:
  coffee:
    driver: bridge
